# 进程与线程
* 操作系统中最核心的概念是进程，它是对正在运行程序的一个抽象。操作系统的其他所有内容都是围绕着进程展开的。
* 即使只有一个可用的CPU，操作系统也具有支持并发操作的能力，通过将一个CPU虚拟化成多个CPU。

## 进程
* 在任何多程序的设计系统中，CPU由一个进程快速切换至另一个线程，使每个线程各运行几十或几百毫秒。
* 严格来说，某个瞬间CPU只能运行一个进程。但在一秒内可以运行多个进程，称为伪并行。

### 进程模型
* 计算机上所有可运行的软件，被组织成若干顺序进程，简称进程。进程就是一个正在执行得到程序的实例。
  * 程序计数器
  * 寄存器
  * 变量的当前值
* 每个进程拥有自己的虚拟CPU，真正的CPU在各进程之间来回切换

### 进程的创建
* 四种主要事件会导致进程的创建
  * 系统初始化
  * 正在运行的程序执行了创建进程的系统调用
  * 用户请求创建一个新进程
  * 一个批处理作业的初始化
  
### 进程的终止
* 自愿
  * 正常退出
  * 出错退出
* 非自愿
  * 严重错误
  * 被其他进程杀死

### 进程的层次结构
* 某些系统中，当进程创建了另一个进程后，父进程和子进程就会保存关联，组成层次结构。

### 进程的状态
* 运行态，实际占用CPU
* 就绪态，可运行，但因为其他进程正在运行而暂时停止
* 阻塞态，除非某依赖完成，否则不能运行

## 线程
* 在同一个地址空间中准并行多个控制线程的情形。

### 线程的使用
* 在应用中同时发生这多种活动。其中某些活动随着时间的推移会被阻塞。通过将这些应用程序分解成可以准并行的多个顺序线程，程序设计模型会更简单。
* 线程更轻量级，比进程更容易创建和销毁。
* 如果多个线程都是CPU密集型的，那么并不能获得性能上的增强，但是如果存在大量的计算和I/O，多个线程就能彼此重叠进行，从而加快速度。

### 经典线程模型
* 进程模型基于两种独立的概念: 资源分组处理与执行。有时将这两种概念分开会更好，这就引入了线程的概念
* 进程拥有一个执行的线程
  * 程序计数器，用来记录接着要执行哪一条指令。
  * 寄存器，用来保存当前线程的工作变量。
  * 堆栈，用来记录执行历史，其中每一帧保存了一个已调用的但是还没有从中返回的过程。
* 线程必须在某个进程中执行，进程用于把资源集中到一起，而线程则是CPU上调度执行的实体。
* 进程中的所有线程都有完全一样的地址空间，所以共享全局变量，也造成了变量的线程不安全问题。